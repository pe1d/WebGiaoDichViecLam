var GJM={prefix:"gjm",form:!1,api_features:!1,target:!1,address_field:!1,lat_field:!1,lng_field:!1,auto_located:!1,enter_clicked:!1,prevent_submission:!1,locator_button:!1,init:function(){GJM.custom_map_location(),GJM.enable_geolocation_features(),GJM.reset_form_fields(),GJM.form_filters_trigger(),GJM.update_form()},set_cookie:function(e,t,o){var r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3);var a=escape(t)+(null==o?"":"; expires="+r.toUTCString());document.cookie=e+"="+a+"; path=/"},get_cookie:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?decodeURIComponent(t[2]):null},delete_cookie:function(e){document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},auto_locator:function(e){GJM.locator_button=e,GJM.prefix=GJM.form.find(".gjm-enabled").data("prefix"),GJM.form=e.closest("form"),GJM.locator_button.addClass("animate-spin"),navigator.geolocation?navigator.geolocation.getCurrentPosition(GJM.navigator_success,GJM.navigator_failed,{timeout:1e4}):(GJM.locator_button.removeClass("animate-spin"),alert(localizeMsg.geo_not_supported))},navigator_success:function(e){var t=new google.maps.Geocoder;t.geocode({latLng:new google.maps.LatLng(e.coords.latitude,e.coords.longitude)},function(e,t){if(t==google.maps.GeocoderStatus.OK){GJM.set_cookie("gjm_autolocate",1,1);var o=e[0].formatted_address,r=e[0].geometry.location.lat(),a=e[0].geometry.location.lng();GJM.set_cookie("gjm_ul_address",o,7),GJM.set_cookie("gjm_ul_lat",r,7),GJM.set_cookie("gjm_ul_lng",a,7),GJM.form.find("#search_location").val(o),GJM.form.find(".gjm-lat").val(r),GJM.form.find(".gjm-lng").val(a),setTimeout(function(){GJM.form.find("#search_location").change(),GJM.locator_button.removeClass("animate-spin")},500)}else GJM.set_cookie("gjm_autolocate",1,1),GJM.locator_button.removeClass("animate-spin"),alert(localizeMsg.geocoder_failed+t)})},navigator_failed:function(e){if(!GJM.auto_located)switch(e.code){case e.PERMISSION_DENIED:alert(localizeMsg.user_denied_request);break;case e.POSITION_UNAVAILABLE:alert(localizeMsg.location_information);break;case 3:alert(localizeMsg.user_location_timed);break;case e.UNKNOWN_ERROR:alert(localizeMsg.unknown_error)}GJM.locator_button.removeClass("animate-spin")},custom_map_location:function(){jQuery(".gjm-map-wrapper, .grm-map-wrapper").each(function(){GJM.form=jQuery(this).closest("form"),GJM.prefix=GJM.form.find("gjm-enabled").data("prefix");var e=jQuery(this).attr("data-map-id");jQuery("#"+GJM.prefix+"-results-map-holder-"+e).length?jQuery(this).detach().appendTo("#"+GJM.prefix+"-results-map-holder-"+e):jQuery(".results-map-holder").length&&jQuery(this).detach().appendTo(".results-map-holder")})},enable_geolocation_features:function(){jQuery(".gjm-enabled").each(function(){if(jQuery("body.petsitter, body.petsitter-child, body.babysitter, body.babysitter-child").find("select.gjm-filter, select.grm-filter").unwrap(".select-style"),GJM.form=jQuery(this).closest("form"),GJM.api_features=jQuery(this).data(),GJM.form.addClass("gjm-features-enabled"),1==wpjm_options.select2&&jQuery.fn.select2?jQuery("select."+GJM.api_features.prefix+"-filter").not("body.page-template-jobify .hero-search select."+GJM.api_features.prefix+"-filter").select2():jQuery.fn.chosen&&jQuery("select."+GJM.api_features.prefix+"-filter").chosen({search_contains:!0}),GJM.form.find(".gjm-filters-wrapper").length?GJM.form.find(".search_jobs").addClass("gjm_filters_enabled"):GJM.form.find(".search_jobs").addClass("gjm_no_filters").removeClass("gjm_use"),GJM.form.find(".grm-filters-wrapper").length?GJM.form.find(".search_resumes").addClass("grm_filters_enabled gjm_use"):GJM.form.find(".search_resumes").addClass("grm_no_filters"),jQuery("body.listify").length&&GJM.form.find(".search-radius-wrapper").length&&GJM.form.find(".search-radius-wrapper").remove(),GJM.form.find(".search_submit").length?GJM.form.find(".gjm-filters-wrapper, .grm-filters-wrapper").detach().insertBefore(GJM.form.find(".search_submit:first")).show():GJM.form.find(".gjm-filters-wrapper, .grm-filters-wrapper").show(),jQuery("body.listingeasy").length){var e=GJM.form.find(".search_jobs");GJM.form.find(".gjm-filters-wrapper").detach().insertAfter(e)}if(GJM.form.attr("action")&&GJM.form.find(".url-disabled").attr("disabled","disabled"),"enabled"==GJM.api_features.autolocator&&navigator.geolocation&&!jQuery.trim(GJM.form.find("#search_location").val()).length)if(1==GJM.get_cookie("gjm_autolocate")&&1==GJM.api_features.save_autolocator)jQuery(window).on("load").on("load",function(){var e=GJM.get_cookie("gjm_ul_address");"undefined"!=e&&null!=e&&(GJM.form.find("#search_location").val(e),GJM.form.find(".gjm-lat").val(GJM.get_cookie("gjm_ul_lat")||""),GJM.form.find(".gjm-lng").val(GJM.get_cookie("gjm_ul_lng")||""),setTimeout(function(){GJM.form.find("#search_location").change()},500))});else{var t=jQuery(this);jQuery(window).on("load").on("load",function(){GJM.auto_located=!0,GJM.auto_locator(t)})}if("enabled"==GJM.api_features.locator_button){jQuery('<i class="'+GJM.api_features.prefix+"-filter "+GJM.api_features.prefix+'-locator-btn gjm-icon-target-1" title="'+GJM.api_features.locator_btn_title+'"></i>').click(function(){GJM.auto_located=!1,GJM.auto_locator(jQuery(this))}).insertAfter(GJM.form.find("input#search_location"))}if("enabled"==GJM.api_features.autocomplete){acField=GJM.form.find("#search_location")[0];var o={types:[GJM.api_features.results_type]};""!=GJM.api_features.country&&(o.componentRestrictions={country:GJM.api_features.country});var r=new google.maps.places.Autocomplete(acField,o);google.maps.event.addListener(r,"place_changed",function(e){GJM.form.find(".gjm-country, .gjm-state").val("");var t=r.getPlace();t.geometry&&(1==t.address_components.length&&"country"==t.address_components[0].types[0]?GJM.form.find(".gjm-country").val(t.address_components[0].short_name):2==t.address_components.length&&"administrative_area_level_1"==t.address_components[0].types[0]&&(GJM.form.find(".gjm-state").val(t.address_components[0].short_name),GJM.form.find(".gjm-country").val(t.address_components[1].short_name)),GJM.form.find(".gjm-lat").val(t.geometry.location.lat().toFixed(6)),GJM.form.find(".gjm-lng").val(t.geometry.location.lng().toFixed(6)),GJM.form.find(".gjm-prev-address").val(GJM.form.find("#search_location").val()))})}})},reset_form_fields:function(){jQuery(".job_filters, .resume_filters").on("click",".reset",function(e){GJM.form=jQuery(this).closest("form"),GJM.form.find(".gjm-filter option:first-child, .grm-filter option:first-child").attr("selected","selected").trigger("chosen:updated"),GJM.form.find("select.gjm-filter, select.grm-filter").chosen("updated"),GJM.form.find(".gjm-lat, .gjm-lng, .gjm-prev-address").val("")})},form_filters_trigger:function(){jQuery(".gjm-filter, .grm-filter").change(function(){(!jQuery(this).hasClass("radius-filter")&&!jQuery(this).hasClass("units-filter")||""!=jQuery(this).closest("form").find("#search_location").val())&&jQuery(this).closest("div.job_listings, div.resumes").trigger("update_results",[1,!1])})},update_form:function(){jQuery(".gjm-enabled").closest("form").find("#search_location").keydown(function(e){return 13==e.keyCode?(GJM.enter_clicked=!0,e.preventDefault(),!1):void jQuery(this).closest("form").find(".gjm-lat, .gjm-lng").val("")}),jQuery(".gjm-enabled").closest("form").find("#search_categories, .job_types :input, .job-manager-filter").on("change",function(){jQuery(this).closest("form").find("#search_location").trigger("change")}),jQuery(".gjm-enabled").closest("form").find("#search_keywords, #search_location").off("change").on("change",function(e){return GJM.prevent_submission&&!GJM.enter_clicked?(GJM.enter_clicked=!1,GJM.prevent_submission=!1,!1):(GJM.enter_clicked&&(GJM.enter_clicked=!1,GJM.prevent_submission=!0),GJM.form=jQuery(this).closest("form"),GJM.target=jQuery(this).closest("div.job_listings, div.resumes"),GJM.lat_field=GJM.form.find(".gjm-lat"),GJM.lng_field=GJM.form.find(".gjm-lng"),setTimeout(function(){var e=GJM.form.find("#search_location").val(),t=GJM.lat_field.val(),o=GJM.lng_field.val();if(!jQuery.trim(e).length||jQuery.trim(t).length&&jQuery.trim(o).length)return console.log("no geocoding"),GJM.target.triggerHandler("update_results",[1,!1]),!1;jQuery(".gjm-radius option:first-child").is(":selected")&&jQuery(".gjm-radius option:last-child").attr("selected","selected"),console.log("new address "+e),GJM.form.find(".gjm-country, .gjm-state").val("");var r=new google.maps.Geocoder;apiRegion=void 0!==typeof GJM.api_features.api_region?GJM.api_features.api_region:"us",r.geocode({address:e,region:apiRegion},function(e,t){t==google.maps.GeocoderStatus.OK?(1==e[0].address_components.length&&"country"==e[0].address_components[0].types[0]?GJM.form.find(".gjm-country").val(e[0].address_components[0].short_name):2==e[0].address_components.length&&"administrative_area_level_1"==e[0].address_components[0].types[0]&&(GJM.form.find(".gjm-state").val(e[0].address_components[0].short_name),GJM.form.find(".gjm-country").val(e[0].address_components[1].short_name)),GJM.lat_field.val(e[0].geometry.location.lat().toFixed(6)),GJM.lng_field.val(e[0].geometry.location.lng().toFixed(6)),setTimeout(function(){GJM.target.triggerHandler("update_results",[1,!1])},500)):(GJM.lat_field.val(""),GJM.lng_field.val(""),alert(localizeMsg.different_address_error_message+t))})},500),!1)})}};jQuery(document).ready(function(e){GJM.init()});